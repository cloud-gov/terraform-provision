---
# upload a certificate to the tooling account
platform: linux

image_resource:
  type: registry-image
  source:
    aws_access_key_id: ((ecr_aws_key))
    aws_secret_access_key: ((ecr_aws_secret))
    repository: harden-concourse-task
    aws_region: us-gov-west-1
    semver_constraint: ">= 1.0.0"

inputs:
- name: cg-provision-repo
- name: terraform-yaml-tooling
- name: certificates
- name: acme

run:
  path: cg-provision-repo/ci/upload-certificate.sh

params:
  AWS_DEFAULT_REGION:
  CERT_PATH:
  CERT_PREFIX:
  ASSUME_ROLE_ARN:
